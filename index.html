<!DOCTYPE html>
<html>
<head>
<title>PSX Trading Calculator Pro</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial;
    margin: 0;
    padding: 10px;
    background: #f2f2f2;
}

.container {
    max-width: 600px;
    margin: auto;
}

h2 {
    text-align: center;
    background: #0d6efd;
    color: white;
    padding: 10px;
}

.box {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
}

input, select, button {
    width: 100%;
    padding: 10px;
    margin: 5px 0;
}

button {
    background: #0d6efd;
    color: white;
    border: none;
}

.result {
    background: #e9ecef;
    padding: 10px;
    margin-top: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #ccc;
    padding: 5px;
    text-align: center;
}

.nav {
    display: flex;
    overflow-x: auto;
}

.nav button {
    flex: 1;
    margin: 2px;
}
</style>

</head>

<body>

<div class="container">

<h2>PSX Trading Calculator Pro</h2>

<div class="nav">
<button onclick="show('pos')">Position Sizer</button>
<button onclick="show('sl')">Stop Loss</button>
<button onclick="show('rr')">Risk Reward</button>
<button onclick="show('br')">Brokerage</button>
<button onclick="show('tj')">Journal</button>
</div>

<div id="pos" class="box">
<h3>Position Sizer</h3>

Capital
<input id="capital" type="number" value="500000">

Risk %
<input id="risk" type="number" value="2">

Entry Price
<input id="entry" type="number">

Stop Loss
<input id="stop" type="number">

<button onclick="position()">Calculate</button>

<div id="posResult" class="result"></div>
</div>

<div id="sl" class="box" style="display:none">
<h3>Stop Loss Manager</h3>

Entry Price
<input id="slEntry" type="number">

Stop Loss Price
<input id="slPrice" type="number">

<button onclick="slCalc()">Calculate</button>

<div id="slResult" class="result"></div>
</div>

<div id="rr" class="box" style="display:none">
<h3>Risk Reward Calculator</h3>

Entry Price
<input id="rrEntry" type="number">

Stop Loss
<input id="rrStop" type="number">

<button onclick="rrCalc()">Calculate Targets</button>

<div id="rrResult" class="result"></div>
</div>

<div id="br" class="box" style="display:none">
<h3>Brokerage Calculator</h3>

Entry Price
<input id="bEntry" type="number">

Exit Price
<input id="bExit" type="number">

Quantity
<input id="bQty" type="number">

Broker %
<input id="broker" type="number" value="0.10">

CDC %
<input id="cdc" type="number" value="0.04">

Tax %
<input id="tax" type="number" value="12.5">

<button onclick="brokerage()">Calculate</button>

<div id="bResult" class="result"></div>
</div>

<div id="tj" class="box" style="display:none">
<h3>Trade Journal</h3>

Stock Name
<input id="tName">

Entry
<input id="tEntry" type="number">

Exit
<input id="tExit" type="number">

Qty
<input id="tQty" type="number">

<button onclick="addTrade()">Add Trade</button>

<h4>History</h4>

<table id="table">
<tr><th>Name</th><th>P/L</th></tr>
</table>

</div>
</div>

<script>
function show(id){
document.getElementById("pos").style.display="none";
document.getElementById("sl").style.display="none";
document.getElementById("rr").style.display="none";
document.getElementById("br").style.display="none";
document.getElementById("tj").style.display="none";
document.getElementById(id).style.display="block";
}

function position(){
var capital = Number(document.getElementById("capital").value);
var risk = Number(document.getElementById("risk").value);
var entry = Number(document.getElementById("entry").value);
var stop = Number(document.getElementById("stop").value);

var riskAmount = capital * risk / 100;
var riskShare = entry - stop;

var shares = Math.floor(riskAmount / riskShare);

document.getElementById("posResult").innerHTML =
"Risk Amount: " + riskAmount.toFixed(2) +
"<br>Risk/Share: " + riskShare.toFixed(2) +
"<br><b>Shares to Buy: " + shares + "</b>";
}

function slCalc(){
var entry = Number(document.getElementById("slEntry").value);
var sl = Number(document.getElementById("slPrice").value);
var risk = entry - sl;

document.getElementById("slResult").innerHTML =
"Risk Per Share: " + risk.toFixed(2);
}

function rrCalc(){
var entry = Number(document.getElementById("rrEntry").value);
var stop = Number(document.getElementById("rrStop").value);

var risk = entry - stop;

var t1 = entry + risk;
var t2 = entry + risk*2;
var t3 = entry + risk*3;

document.getElementById("rrResult").innerHTML =
"1:1 Target: " + t1.toFixed(2) +
"<br>1:2 Target: " + t2.toFixed(2) +
"<br>1:3 Target: " + t3.toFixed(2);
}

function brokerage(){
var entry = Number(document.getElementById("bEntry").value);
var exit = Number(document.getElementById("bExit").value);
var qty = Number(document.getElementById("bQty").value);

var broker = Number(document.getElementById("broker").value)/100;
var cdc = Number(document.getElementById("cdc").value)/100;
var tax = Number(document.getElementById("tax").value)/100;

var buy = entry * qty;
var sell = exit * qty;

var comm = (buy + sell) * broker;
var cdcFee = (buy + sell) * cdc;

var profit = sell - buy;
var taxFee = profit > 0 ? profit * tax : 0;

var net = profit - comm - cdcFee - taxFee;

document.getElementById("bResult").innerHTML =
"Gross P/L: " + profit.toFixed(2) +
"<br>Broker: " + comm.toFixed(2) +
"<br>CDC: " + cdcFee.toFixed(2) +
"<br>Tax: " + taxFee.toFixed(2) +
"<br><b>Net P/L: " + net.toFixed(2) + "</b>";
}

var trades = [];

function addTrade(){
var name = document.getElementById("tName").value;
var entry = Number(document.getElementById("tEntry").value);
var exit = Number(document.getElementById("tExit").value);
var qty = Number(document.getElementById("tQty").value);

var pl = (exit - entry) * qty;

trades.push({name, pl});

load();
}

function load(){
var table = document.getElementById("table");

table.innerHTML = "<tr><th>Name</th><th>P/L</th></tr>";

for(var i=0;i<trades.length;i++){
table.innerHTML += "<tr><td>"+trades[i].name+"</td><td>"+trades[i].pl.toFixed(2)+"</td></tr>";
}
}
</script>

</body>
</html>
